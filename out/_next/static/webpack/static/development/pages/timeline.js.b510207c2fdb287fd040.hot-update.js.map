{"version":3,"file":"static/webpack/static\\development\\pages\\timeline.js.b510207c2fdb287fd040.hot-update.js","sources":["webpack:///./page-containers/Timeline/Timeline.js"],"sourcesContent":["import moment from 'moment';\r\nimport Router from 'next/router';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { useTimelineContext } from './Provider';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport formatNumber from '../../lib/formatNumber';\r\nimport LineChart from '../../components/LineChart';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport useTheme from '@material-ui/core/styles/useTheme';\r\nimport CountrySelect from '../../components/CountrySelect';\r\nimport PaginatedTable from '../../components/PaginatedTable';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\nimport { red, green, orange } from '@material-ui/core/colors';\r\nimport useNeumorphShadowStyles from '../../lib/hooks/useNeumorphShadow';\r\n\r\nconst headCells = [\r\n\t{ id: 'country', numeric: false, disablePadding: false, label: 'Country' },\r\n\t{ id: 'last_update', numeric: true, disablePadding: false, label: 'Last Update' },\r\n\t{ id: 'cases', numeric: true, disablePadding: false, label: 'Cases' },\r\n\t{ id: 'deaths', numeric: true, disablePadding: false, label: 'Deaths' },\r\n\t{ id: 'recovered', numeric: true, disablePadding: false, label: 'Recovered' },\r\n];\r\n\r\nconst useStyles = makeStyles(\r\n\t({ palette, spacing, typography }) => ({\r\n\t\ttitle: {\r\n\t\t\tfontWeight: typography.fontWeightMedium,\r\n\t\t},\r\n\t\tsubtitle: {\r\n\t\t\tcolor: palette.grey[500],\r\n\t\t},\r\n\t\tchartContainer: {\r\n\t\t\toverflow: 'hidden',\r\n\t\t\tmarginTop: spacing(2),\r\n\t\t},\r\n\t\tchartTitle: {\r\n\t\t\tpadding: spacing(1, 3),\r\n\t\t},\r\n\t\tchart: {\r\n\t\t\tmarginTop: spacing(3),\r\n\t\t\tpadding: spacing(1, 0),\r\n\t\t},\r\n\t\tpaper: {\r\n\t\t\tpadding: spacing(1, 3),\r\n\t\t},\r\n\t\tcard: {\r\n\t\t\tpadding: spacing(4, 1),\r\n\t\t},\r\n\t}),\r\n\t{ name: 'timeline' }\r\n);\r\n\r\nconst CardValue = ({ loading, data, title, latestNumber, diffNumber }) => {\r\n\tconst classes = useStyles();\r\n\tif (loading) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Skeleton width={180} height={20} />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Skeleton width={120} height={39} />\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Skeleton width={80} height={14} />\r\n\t\t\t\t</Grid>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tif (!loading && data.length > 0) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Typography gutterBottom variant=\"subtitle2\" className={classes.subtitle}>\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.title}>\r\n\t\t\t\t\t\t{latestNumber}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Typography variant=\"caption\" className={classes.subtitle}>\r\n\t\t\t\t\t\t{diffNumber >= 0 ? `+${formatNumber(diffNumber, 0)}` : `${formatNumber(diffNumber, 0)}`}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tif (!loading && data.length === 0) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Typography gutterBottom variant=\"subtitle2\" className={classes.subtitle}>\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.title}>\r\n\t\t\t\t\t\t0\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Typography variant=\"caption\" className={classes.subtitle}>\r\n\t\t\t\t\t\t+0\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default () => {\r\n\tconst theme = useTheme();\r\n\tconst classes = useStyles();\r\n\tconst shadow = useNeumorphShadowStyles({ bgColor: theme.palette.background.default });\r\n\r\n\tconst { timeline, countries, setCountries, timelineCountry, setTimlineCountry } = useTimelineContext();\r\n\r\n\tconst latestCaseNumber = timeline.data.length > 1 && formatNumber(timeline.data[0].cases, 0);\r\n\tconst latestDeathsNumber = timeline.data.length > 1 && formatNumber(timeline.data[0].deaths, 0);\r\n\tconst latestRecoveredNumber = timeline.data.length > 1 && formatNumber(timeline.data[0].recovered, 0);\r\n\r\n\tconst diffCaseNumbers = timeline.data.length > 1 && timeline.data[0].cases - timeline.data[1].cases;\r\n\tconst diffDeathsNumers = timeline.data.length > 1 && timeline.data[0].deaths - timeline.data[1].deaths;\r\n\tconst diffRecoveredNumbers = timeline.data.length > 1 && timeline.data[0].recovered - timeline.data[1].recovered;\r\n\r\n\tconst latestDate = timeline.data.length > 1 && moment(timeline.data[0].last_update).format('M/D/YYYY');\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid item xs={12} container alignItems=\"center\" justify=\"flex-end\">\r\n\t\t\t\t<CountrySelect\r\n\t\t\t\t\tcountries={countries}\r\n\t\t\t\t\tcountry={timelineCountry}\r\n\t\t\t\t\tsetCountries={setCountries}\r\n\t\t\t\t\tloading={timelineCountry.name.length === 0 || timeline.loading}\r\n\t\t\t\t\tsetCountry={(c) => {\r\n\t\t\t\t\t\tsetTimlineCountry({ ...c });\r\n\t\t\t\t\t\tRouter.push({ query: c.alpha2, pathname: '/timeline' }, `/timeline/${c.alpha2}`, {\r\n\t\t\t\t\t\t\tshallow: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid item sm={4} xs={12}>\r\n\t\t\t\t<Paper className={`${classes.card} ${shadow.root}`} style={{ borderBottom: `3px solid ${orange[200]}` }}>\r\n\t\t\t\t\t<Grid container direction=\"column\" alignItems=\"center\">\r\n\t\t\t\t\t\t<CardValue\r\n\t\t\t\t\t\t\t{...timeline}\r\n\t\t\t\t\t\t\tdiffNumber={diffCaseNumbers}\r\n\t\t\t\t\t\t\tlatestNumber={latestCaseNumber}\r\n\t\t\t\t\t\t\ttitle={`Cases since ${latestDate}`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid item sm={4} xs={12}>\r\n\t\t\t\t<Paper className={`${classes.card} ${shadow.root}`} style={{ borderBottom: `3px solid ${green[400]}` }}>\r\n\t\t\t\t\t<Grid container direction=\"column\" alignItems=\"center\">\r\n\t\t\t\t\t\t<CardValue\r\n\t\t\t\t\t\t\t{...timeline}\r\n\t\t\t\t\t\t\tdiffNumber={diffRecoveredNumbers}\r\n\t\t\t\t\t\t\tlatestNumber={latestRecoveredNumber}\r\n\t\t\t\t\t\t\ttitle={`Recovered since ${latestDate}`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid item sm={4} xs={12}>\r\n\t\t\t\t<Paper className={`${classes.card} ${shadow.root}`} style={{ borderBottom: `3px solid ${red[600]}` }}>\r\n\t\t\t\t\t<Grid container direction=\"column\" alignItems=\"center\">\r\n\t\t\t\t\t\t<CardValue\r\n\t\t\t\t\t\t\t{...timeline}\r\n\t\t\t\t\t\t\tdiffNumber={diffDeathsNumers}\r\n\t\t\t\t\t\t\tlatestNumber={latestDeathsNumber}\r\n\t\t\t\t\t\t\ttitle={`Deaths since ${latestDate}`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid item xs={12} container direction=\"column\" className={classes.chartContainer}>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Typography variant=\"h6\">Graph</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Typography variant=\"subtitle2\" className={classes.subtitle}>\r\n\t\t\t\t\t\t{timeline.data.length > 1 &&\r\n\t\t\t\t\t\t\t`${moment(timeline.data[timeline.data.length - 1].last_update).format('M/D/YYYY')} - ${moment(\r\n\t\t\t\t\t\t\t\ttimeline.data[0].last_update\r\n\t\t\t\t\t\t\t).format('M/D/YYYY')}`}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Paper elevation={0} style={{ backgroundColor: 'transparent' }}>\r\n\t\t\t\t\t<Grid item className={classes.chart}>\r\n\t\t\t\t\t\t<LineChart\r\n\t\t\t\t\t\t\theight={355}\r\n\t\t\t\t\t\t\tdata={timeline.data}\r\n\t\t\t\t\t\t\ttooltipProps={{\r\n\t\t\t\t\t\t\t\tcontent: ({ active, label, payload }) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Grid container direction=\"column\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tDate: {moment(label).format('M/D/YYYY')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t{payload &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpayload.map((entry, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst { name, value } = entry;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography key={`item-${index}`} variant=\"subtitle2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name.charAt(0).toUpperCase() + name.slice(1)}:{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatNumber(value, 0)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Grid>\r\n\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<PaginatedTable\r\n\t\t\t\t\ttitle=\"Table\"\r\n\t\t\t\t\tdata={timeline.data}\r\n\t\t\t\t\theadCells={headCells}\r\n\t\t\t\t\tdefaultOrder=\"last_update\"\r\n\t\t\t\t\tloading={timeline.loading}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t);\r\n};\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AACA;AAFA;AAIA;AACA;AADA;AAGA;AACA;AACA;AAFA;AAIA;AACA;AADA;AAGA;AACA;AADA;AArBA;AAAA;AAyBA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAGA;AAVA;AAcA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAJA;AAUA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAJA;AAUA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAJA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAMA;AAAA;AAEA;AACA;AAAA;AAAA;AAKA;AAIA;AAxBA;AAHA;AAkCA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAUA;;;;A","sourceRoot":""}